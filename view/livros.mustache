<html>
    <head>

        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
      
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="http://localhost:8081/css/paginascss.css" />

        
        <style>
            body{
                background-image: url('images/background2.jpg');
                background-repeat: no-repeat;
                background-attachment: fixed;
                background-size: cover;
            }
        </style>
    </head>
    <body>
        <br>
        <h1>Livros</h1>
        <br>
       

         <!--     MENU    -->
         <nav class="navbar navbar-dark bg-dark">
            
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
           
          
            <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
              <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                  <a class="nav-link" href="http://localhost:8081/home">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="inserirLivroform">Inserir Livro</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://localhost:8081/livros">Listar Todos</a>
                  </li>
              </ul>
              <!--<form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Pesquisar" id="idpesquisa" aria-label="Pesquisar">
            <button class="btn btn-outline-success my-2 my-sm-0" type="button" onclick="pesquisar()">Pesquisar</button>
              </form>-->
            </div>
         
        </nav>
<!------------------------------------------------------------------------------------------------------>
       
        <br>
        <form class="form-inline">
            <input class="form-control mr-sm-2" type="search" placeholder="Pesquisar" id="idpesquisa" aria-label="Pesquisar">
            <button class="btn btn-outline-success my-2 my-sm-0" type="button" onclick="pesquisar()">Pesquisar</button>
        </form>
        <br>

        <br>

        <table align="center" style="text-align: center;" class="table">
                {{#tabela}}
                <tr style="background-color: black; color: white;"> <td> Id </td> <td> ISBN </td> <td> Titulo </td> <td> Número de Páginas </td> <td> Stock </td><td> Editora </td> <td> ELIMINAR</td><td> ALTERAR</td> </tr>
  
                {{/tabela}}

            {{#livros}}
                    

                    <tr>
                        <td>{{idLivro}}</td>
                        <td>{{isbn}}</td>
                        <td>{{tituloLivro}}</td>
                        <td>{{numeroPaginas}}</td>
                        <td>{{stock}}</td>
                        <td>{{nomeEditora}}</td>
                        <td> <button class="btn btn-outline-success my-2 my-sm-0" onclick="eliminar({{idLivro}});"><img width="20" height="20" src="http://localhost:8081/images/delete.png"></button>  </td>
                        <td> <a href="http://localhost:8081/updateLivro/{{idLivro}}"><button class="btn btn-outline-success my-2 my-sm-0"><img width="20" height="20" src="http://localhost:8081/images/update.png"></button></a>  </td>
                    </tr>
            {{/livros}}
            <center><b>{{alert}}</b></center>
        </table>
    </body>

    <script>
        function pesquisar() {
            var id = document.getElementById("idpesquisa").value;
            if (id==""){
                alert("Campo de pesquisa tem de ter um valor!");
            }else{
                 location.replace("http://localhost:8081/livros/"+id)
            }
        }

        function eliminar(id) {
            console.log(id);
            var xhttp = new XMLHttpRequest();
            xhttp.open("DELETE", "http://localhost:8081/livros/"+id, true);
            xhttp.send();
            window.location.reload(true);
        }

        
    </script>
</html>